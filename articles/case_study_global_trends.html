<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Exploring Global Trends in Tuberculosis Incidence Rates • getTBinR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Exploring Global Trends in Tuberculosis Incidence Rates">
<meta property="og:description" content="getTBinR">
<meta property="og:image" content="samabbott.co.uk/getTBinR/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">getTBinR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.7.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../articles/intro.html">Getting Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Case Studies
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/case_study_global_trends.html">Exploring Global Trends in Tuberculosis Incidence Rates</a>
    </li>
    <li>
      <a href="../articles/case_fatality_rate.html">Exploring Estimates of the Tuberculosis Case Fatality Ratio</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Dashboards
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="http://www.seabbs.co.uk/shiny/ExploreGlobalTB/">Explore Global Tuberculosis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://www.samabbott.co.uk/tags/who/">Blog posts</a>
    </li>
    <li class="divider">
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/seabbs/getTBinR/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Exploring Global Trends in Tuberculosis Incidence Rates</h1>
                        <h4 class="author">Sam Abbott</h4>
            
            <h4 class="date">2020-06-10</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/seabbs/getTBinR/blob/master/vignettes/case_study_global_trends.Rmd"><code>vignettes/case_study_global_trends.Rmd</code></a></small>
      <div class="hidden name"><code>case_study_global_trends.Rmd</code></div>

    </div>

    
    
<p>This case study investigates global trends in Tuberculosis incidence rates and explores whether Tuberculosis eradication is on the horizon. It was adapted from <a href="https://www.samabbott.co.uk/post/intro-gettbinr/">this</a> blog post. To get started the first step is to get the package, as well as loading other packages required for the analysis.</p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">getTBinR</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">ggplot2</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">viridis</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">knitr</span>)</pre></body></html></div>
<p>The package is loaded, time to get the data. We download both the data itself and it’s accompanying data dictionary.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="no">tb_burden</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_tb_burden.html">get_tb_burden</a></span>()
<span class="no">dict</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/get_data_dict.html">get_data_dict</a></span>()</pre></body></html></div>
<p>We want to explore incidence rates so we need to find them in the data. We can do this using the <code><a href="../reference/search_data_dict.html">getTBinR::search_data_dict</a></code> function,</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="fu"><a href="../reference/search_data_dict.html">search_data_dict</a></span>(<span class="kw">dict</span> <span class="kw">=</span> <span class="no">dict</span>, <span class="kw">def</span> <span class="kw">=</span> <span class="st">"incidence"</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>()</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">variable_name</th>
<th align="left">dataset</th>
<th align="left">code_list</th>
<th align="left">definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">e_inc_100k</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated incidence (all forms) per 100 000 population</td>
</tr>
<tr class="even">
<td align="left">e_inc_100k_hi</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated incidence (all forms) per 100 000 population, high bound</td>
</tr>
<tr class="odd">
<td align="left">e_inc_100k_lo</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated incidence (all forms) per 100 000 population, low bound</td>
</tr>
<tr class="even">
<td align="left">e_inc_rr_num</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated incidence of rifampicin resistant TB (absolute number)</td>
</tr>
<tr class="odd">
<td align="left">e_inc_rr_num_hi</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated incidence of rifampicin resistant TB (absolute number): high bound</td>
</tr>
<tr class="even">
<td align="left">e_inc_rr_num_lo</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated incidence of rifampicin resistant TB (absolute number): low bound</td>
</tr>
<tr class="odd">
<td align="left">e_inc_tbhiv_100k</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated incidence of TB cases who are HIV-positive per 100 000 population</td>
</tr>
<tr class="even">
<td align="left">e_inc_tbhiv_100k_hi</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated incidence of TB cases who are HIV-positive per 100 000 population, high bound</td>
</tr>
<tr class="odd">
<td align="left">e_inc_tbhiv_100k_lo</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated incidence of TB cases who are HIV-positive per 100 000 population, low bound</td>
</tr>
<tr class="even">
<td align="left">e_inc_tbhiv_num</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated incidence of TB cases who are HIV-positive</td>
</tr>
<tr class="odd">
<td align="left">e_inc_tbhiv_num_hi</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated incidence of TB cases who are HIV-positive, high bound</td>
</tr>
<tr class="even">
<td align="left">e_inc_tbhiv_num_lo</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Estimated incidence of TB cases who are HIV-positive, low bound</td>
</tr>
</tbody>
</table>
<p>The first hit, <code>e_inc_100k</code>, is the TB incidence rate, with the next two variables being the lower and upper bounds of this estimate. For a quick overview lets map country specific incidence rates in 2016 using the getTBinR function <code>map_tb_burden</code>,</p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="fu"><a href="../reference/map_tb_burden.html">map_tb_burden</a></span>(<span class="kw">df</span> <span class="kw">=</span> <span class="no">tb_burden</span>, <span class="kw">dict</span> <span class="kw">=</span> <span class="no">dict</span>, <span class="kw">year</span> <span class="kw">=</span> <span class="fl">2016</span>,
              <span class="kw">metric</span> <span class="kw">=</span> <span class="st">"e_inc_100k"</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"Map of Global Tuberculosis Incidence Rates - 2016"</span>,
       <span class="kw">subtitle</span> <span class="kw">=</span> <span class="st">""</span>, <span class="kw">caption</span> <span class="kw">=</span> <span class="st">"Source: World Health Organization"</span>)</pre></body></html></div>
<p><img src="case_study_global_trends_files/figure-html/map-tb-2016-inc-1.png" width="672" style="display: block; margin: auto;"></p>
<p>This shows that incidence rates are highly heterogeneous between regions. To get an better understanding of this lets plot incidence rates by WHO region (<strong>Note: This functionality has now been implemented into the <code>getTBinR</code> using <code><a href="../reference/plot_tb_burden_summary.html">getTBinR::plot_tb_burden_summary(metric_label = "e_inc_100k", legend = "none", facet = "Area", scales = "free_y", compare_to_world = FALSE)</a></code></strong>),</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="no">tb_inc_region</span> <span class="kw">&lt;-</span> <span class="no">tb_burden</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="no">year</span>, <span class="no">g_whoregion</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise_all.html">summarise_at</a></span>(<span class="kw">.vars</span> <span class="kw">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span>(<span class="no">e_inc_num</span>, <span class="no">e_inc_num_lo</span>, <span class="no">e_inc_num_hi</span>, <span class="no">e_pop_num</span>),
               <span class="kw">.funs</span> <span class="kw">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/funs.html">funs</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/numeric.html">as.numeric</a></span>(<span class="no">.</span>), <span class="kw">na.rm</span> <span class="kw">=</span> <span class="no">T</span>))) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_at</a></span>(<span class="kw">.vars</span> <span class="kw">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/vars.html">vars</a></span>(<span class="no">e_inc_num</span>, <span class="no">e_inc_num_lo</span>, <span class="no">e_inc_num_hi</span>),
            <span class="kw">.funs</span> <span class="kw">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/funs.html">funs</a></span>(<span class="kw">inc_rate</span> <span class="kw">=</span> <span class="no">.</span> / <span class="no">e_pop_num</span> * <span class="fl">1e5</span>))
<span class="co">#&gt; Warning: `funs()` is deprecated as of dplyr 0.8.0.</span>
<span class="co">#&gt; Please use a list of either functions or lambdas: </span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   # Simple named list: </span>
<span class="co">#&gt;   list(mean = mean, median = median)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   # Auto named with `tibble::lst()`: </span>
<span class="co">#&gt;   tibble::lst(mean, median)</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;   # Using lambdas</span>
<span class="co">#&gt;   list(~ mean(., trim = .2), ~ median(., na.rm = TRUE))</span>
<span class="co">#&gt; This warning is displayed once every 8 hours.</span>
<span class="co">#&gt; Call `lifecycle::last_warnings()` to see where this warning was generated.</span>

<span class="no">plot_tb_inc_region</span> <span class="kw">&lt;-</span> <span class="kw">function</span>(<span class="no">df</span> <span class="kw">=</span> <span class="kw">NULL</span>, <span class="no">title</span> <span class="kw">=</span> <span class="kw">NULL</span>, <span class="no">subtitle</span> <span class="kw">=</span> <span class="kw">NULL</span>, <span class="no">scales</span> <span class="kw">=</span> <span class="kw">NULL</span>) {
  <span class="no">df</span> <span class="kw">%&gt;%</span>
      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">x</span> <span class="kw">=</span> <span class="no">year</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="no">e_inc_num_inc_rate</span>,
                 <span class="kw">col</span> <span class="kw">=</span> <span class="no">g_whoregion</span>, <span class="kw">group</span> <span class="kw">=</span> <span class="no">g_whoregion</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>() +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html">geom_linerange</a></span>(<span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="kw">ymin</span> <span class="kw">=</span> <span class="no">e_inc_num_lo_inc_rate</span>,
                     <span class="kw">ymax</span> <span class="kw">=</span> <span class="no">e_inc_num_hi_inc_rate</span>)) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>() +
  <span class="fu"><a href="https://rdrr.io/pkg/viridis/man/scale_viridis.html">scale_colour_viridis</a></span>(<span class="kw">discrete</span> <span class="kw">=</span> <span class="fl">TRUE</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">title</span> <span class="kw">=</span> <span class="no">title</span>, <span class="kw">subtitle</span> <span class="kw">=</span> <span class="no">subtitle</span>,
       <span class="kw">x</span> <span class="kw">=</span> <span class="st">"Year"</span>, <span class="kw">y</span> <span class="kw">=</span> <span class="st">"Tuberculosis Incidence Rates (per 100,000 population)"</span>,
       <span class="kw">caption</span> <span class="kw">=</span> <span class="st">"Source: World Health Organization"</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span>() +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span>(<span class="kw">legend.position</span> <span class="kw">=</span> <span class="st">"none"</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span>(~<span class="no">g_whoregion</span>, <span class="kw">scales</span> <span class="kw">=</span> <span class="no">scales</span>)
}

<span class="no">tb_inc_region</span> <span class="kw">%&gt;%</span>
  <span class="fu">plot_tb_inc_region</span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"Global Tuberculosis Incidence Rates"</span>,
                     <span class="kw">subtitle</span> <span class="kw">=</span> <span class="st">"By WHO region, with a fixed y axis"</span>,
                     <span class="kw">scales</span> <span class="kw">=</span> <span class="st">"fixed"</span>)</pre></body></html></div>
<p><img src="case_study_global_trends_files/figure-html/plot-region-tb-inc-1.png" width="672" style="display: block; margin: auto;"></p>
<p>We see that incidence rates are much higher in Africa, and in Asia, than in other regions, and that incidence rates in the Americas and Europe are the lowest. This chart has a fixed y axis which makes it hard to see trends over time within regions, if we repeat it with a free y axis the trends over time become more apparent,</p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="no">tb_inc_region</span> <span class="kw">%&gt;%</span>
  <span class="fu">plot_tb_inc_region</span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"Global Tuberculosis Incidence Rates"</span>,
                     <span class="kw">subtitle</span> <span class="kw">=</span> <span class="st">"By WHO region, with a variable y axis"</span>,
                     <span class="kw">scales</span> <span class="kw">=</span> <span class="st">"free_y"</span>)</pre></body></html></div>
<p><img src="case_study_global_trends_files/figure-html/plot-region-tb-inc-free-1.png" width="672" style="display: block; margin: auto;"></p>
<p>This plot shows that Tuberculosis incidence rates are decreasing in all regions, which is a great sign for the elimination of Tuberculosis. However whilst this is true on the regional level it may not be true for all countries in the data set, something that is required to truly eradicate Tuberculosis. To explore this we find the countries that had higher incidence rates in 2016 than in 2000.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="no">countries_inc_up</span> <span class="kw">&lt;-</span> <span class="no">tb_burden</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">year</span> <span class="kw">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">2000</span>, <span class="fl">2016</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="no">country</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span>(<span class="no">e_inc_100k</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span>(<span class="fl">1</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">year</span> <span class="kw">==</span> <span class="fl">2016</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span>(<span class="no">country</span>)

<span class="no">high_inc_countries</span> <span class="kw">&lt;-</span> <span class="no">tb_burden</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">year</span> <span class="kw">==</span> <span class="fl">2016</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="no">country</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span>(<span class="kw">e_inc_100k</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span>(<span class="no">e_inc_100k</span>)) <span class="kw">%&gt;%</span>
  <span class="no">ungroup</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html">desc</a></span>(<span class="no">e_inc_100k</span>)) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span>(<span class="fl">1</span>:<span class="fl">20</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/pull.html">pull</a></span>(<span class="no">country</span>) <span class="kw">%&gt;%</span>
  <span class="no">unique</span>
<span class="co">#&gt; `summarise()` ungrouping output (override with `.groups` argument)</span>

<span class="no">high_inc_up_countries</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/reexports.html">intersect</a></span>(<span class="no">countries_inc_up</span>, <span class="no">high_inc_countries</span>)</pre></body></html></div>
<p>This results in a list of 48 countries all of which had higher incidence rates in 2016 than in 2000. Of these countries 9 were in the top 20 countries by incidence rate in 2016. This can plotted below using <code><a href="../reference/plot_tb_burden_overview.html">getTBinR::plot_tb_burden_overview</a></code>,</p>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="fu"><a href="../reference/plot_tb_burden_overview.html">plot_tb_burden_overview</a></span>(<span class="kw">df</span> <span class="kw">=</span> <span class="no">tb_burden</span>,
                        <span class="kw">dict</span> <span class="kw">=</span> <span class="no">dict</span>,
                        <span class="kw">metric</span> <span class="kw">=</span> <span class="st">"e_inc_100k"</span>,
                        <span class="kw">countries</span> <span class="kw">=</span> <span class="no">high_inc_up_countries</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"Tuberculosis Incidence Rates from 2000-2016"</span>,
       <span class="kw">subtitle</span> <span class="kw">=</span> <span class="st">"Showing countries with the highest incidence rates in which incidence rates are increasing"</span>,
       <span class="kw">caption</span> <span class="kw">=</span> <span class="st">"Source: World Health Organization"</span>)</pre></body></html></div>
<p><img src="case_study_global_trends_files/figure-html/plot-tb-inc-high-inc-overview-1.png" width="672" style="display: block; margin: auto;"></p>
<p>GetTBinR also supplies another function (<code>plot_tb_burden</code>) that can be used to visualise this,</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="fu"><a href="../reference/plot_tb_burden.html">plot_tb_burden</a></span>(<span class="kw">df</span> <span class="kw">=</span> <span class="no">tb_burden</span>,
               <span class="kw">dict</span> <span class="kw">=</span> <span class="no">dict</span>,
               <span class="kw">metric</span> <span class="kw">=</span> <span class="st">"e_inc_100k"</span>, <span class="kw">countries</span> <span class="kw">=</span> <span class="no">high_inc_up_countries</span>,
               <span class="kw">facet</span> <span class="kw">=</span> <span class="st">"country"</span>, <span class="kw">scales</span> <span class="kw">=</span> <span class="st">"free_y"</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"Tuberculosis Incidence Rates"</span>,
       <span class="kw">subtitle</span> <span class="kw">=</span> <span class="st">"Showing countries with the highest incidence rates in which incidence rates are increasing"</span>,
       <span class="kw">caption</span> <span class="kw">=</span> <span class="st">"Source: World Health Organization"</span>)</pre></body></html></div>
<p><img src="case_study_global_trends_files/figure-html/plot-tb-inc-high-inc-1.png" width="672" style="display: block; margin: auto;"></p>
<p>A possible cause of this may be that reporting of Tuberculosis notifications has improved over time, to understand this we first find the required variable in the data,</p>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="fu"><a href="../reference/search_data_dict.html">search_data_dict</a></span>(<span class="kw">dict</span> <span class="kw">=</span> <span class="no">dict</span>, <span class="kw">def</span> <span class="kw">=</span> <span class="st">"detection"</span>) <span class="kw">%&gt;%</span>
  <span class="kw pkg">knitr</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span>()</pre></body></html></div>
<table class="table">
<thead><tr class="header">
<th align="left">variable_name</th>
<th align="left">dataset</th>
<th align="left">code_list</th>
<th align="left">definition</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">c_cdr</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Case detection rate (all forms) [also known as TB treatment coverage], percent</td>
</tr>
<tr class="even">
<td align="left">c_cdr_hi</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Case detection rate (all forms) [also known as TB treatment coverage], percent, high bound</td>
</tr>
<tr class="odd">
<td align="left">c_cdr_lo</td>
<td align="left">Estimates</td>
<td align="left"></td>
<td align="left">Case detection rate (all forms) [also known as TB treatment coverage], percent, low bound</td>
</tr>
<tr class="even">
<td align="left">lf_urine_lam</td>
<td align="left">Policies and services</td>
<td align="left">0=No; 1=yes</td>
<td align="left">Does national policy and the diagnostic algorithm indicate the use of the lateral flow urine lipoarabinomannan assay (LF-LAM) to assist in the detection of TB in people living with HIV?</td>
</tr>
</tbody>
</table>
<p>We then plot the case detection rate over time in the countries of interest,</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="fu"><a href="../reference/plot_tb_burden.html">plot_tb_burden</a></span>(<span class="kw">df</span> <span class="kw">=</span> <span class="no">tb_burden</span>,
               <span class="kw">dict</span> <span class="kw">=</span> <span class="no">dict</span>,
               <span class="kw">metric</span> <span class="kw">=</span> <span class="st">"c_cdr"</span>, <span class="kw">countries</span> <span class="kw">=</span> <span class="no">high_inc_up_countries</span>,
               <span class="kw">facet</span> <span class="kw">=</span> <span class="st">"country"</span>, <span class="kw">scales</span> <span class="kw">=</span> <span class="st">"free_y"</span>) +
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span>(<span class="kw">title</span> <span class="kw">=</span> <span class="st">"Tuberculosis Detection Rates"</span>,
       <span class="kw">subtitle</span> <span class="kw">=</span> <span class="st">"Showing countries with the highest incidence rates in which incidence rates are increasing"</span>,
       <span class="kw">caption</span> <span class="kw">=</span> <span class="st">"Source: World Health Organization"</span>)</pre></body></html></div>
<p><img src="case_study_global_trends_files/figure-html/plot-tb-inc-high-case-1.png" width="672" style="display: block; margin: auto;"></p>
<p>The plot above shows that for some countries such as Mozambique and South Africa the increases in incidence rates may be linked to increases in the cases detection rate. However, it is clear that this is not the case for all countries, in particular the Congo which has seen increasing incidence rates and falling case detection rates.</p>
<p>This case study has highlighted the fact that whilst Tuberculosis is declining globally this is not the case in all countries. In order for the global eradication of Tuberculosis to be a success it is vital that resources are targeted at those countries which are struggling to reduce their incidence rates.</p>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Sam Abbott.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '6c737a6c632ea7eab75c912a6b07b5f1',
    indexName: 'gettbinr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
