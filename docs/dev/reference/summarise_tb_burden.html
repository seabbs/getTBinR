<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Summarise TB Burden â€” summarise_tb_burden â€¢ getTBinR</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/lumen/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.1/clipboard.min.js" integrity="sha256-hIvIxeqhGZF+VVeM55k0mJvWpQ6gTkWk3Emc+NmowYA=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>


<meta property="og:title" content="Summarise TB Burden â€” summarise_tb_burden" />

<meta property="og:description" content="Summarise TB burden metrics by region, globally, and for custom groupings. For variables with
uncertainty represented by confidence intervals bootstrapping can be used (assuming a normal distribution) to
include this in any estimated summary measures. Currently two statistics are supported; the mean (with
95% confidence intervals) and the median (with 95% interquartile range). An incidence rate and weighted proportion
statistic are in development." />
<meta name="twitter:card" content="summary" />

<meta name="robots" content="noindex">

<!-- mathjax -->
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">getTBinR</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">0.5.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">Home</a>
</li>
<li>
  <a href="../articles/intro.html">Getting Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Case Studies
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/case_study_global_trends.html">Exploring Global Trends in Tuberculosis Incidence Rates</a>
    </li>
    <li>
      <a href="../articles/case_fatality_rate.html">Exploring Estimates of the Tuberculosis Case Fatality Ratio</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Dashboards
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="http://www.seabbs.co.uk/shiny/ExploreGlobalTB/">Explore Global Tuberculosis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://www.samabbott.co.uk/tags/who/">Blog posts</a>
    </li>
    <li class="divider"></li>
    <li>
      <a href="../news/index.html">Change log</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fa fa-file-code-o"></span>
     
    Functions
  </a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/seabbs/getTBinR">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Summarise TB Burden</h1>
    <small class="dont-index">Source: <a href='https://github.com/seabbs/getTBinR/blob/master/R/summarise_tb_burden.R'><code>R/summarise_tb_burden.R</code></a></small>
    <div class="hidden name"><code>summarise_tb_burden.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Summarise TB burden metrics by region, globally, and for custom groupings. For variables with
uncertainty represented by confidence intervals bootstrapping can be used (assuming a normal distribution) to
include this in any estimated summary measures. Currently two statistics are supported; the mean (with
95% confidence intervals) and the median (with 95% interquartile range). An incidence rate and weighted proportion
statistic are in development.</p>
    
    </div>

    <pre class="usage"><span class='fu'>summarise_tb_burden</span>(<span class='kw'>df</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>dict</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>metric</span> <span class='kw'>=</span> <span class='st'>"e_inc_100k"</span>,
  <span class='kw'>metric_label</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>conf</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/c'>c</a></span>(<span class='st'>"_lo"</span>, <span class='st'>"_hi"</span>), <span class='kw'>years</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>samples</span> <span class='kw'>=</span> <span class='fl'>1000</span>, <span class='kw'>countries</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>compare_to_region</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>compare_to_world</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>custom_compare</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>compare_all_regions</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>stat</span> <span class='kw'>=</span> <span class='st'>"mean"</span>, <span class='kw'>denominator</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>truncate_at_zero</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>annual_change</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>download_data</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>save</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>burden_save_name</span> <span class='kw'>=</span> <span class='st'>"TB_burden"</span>,
  <span class='kw'>dict_save_name</span> <span class='kw'>=</span> <span class='st'>"TB_data_dict"</span>, <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>df</th>
      <td><p>Dataframe of TB burden data, as sourced by <code><a href='get_tb_burden.html'>get_tb_burden</a></code>.
If not specified then will source the WHO TB burden data, either locally if available
or directly from the WHO (if <code><a href='https://www.rdocumentation.org/packages/base/topics/assignOps'>download_data = TRUE</a></code>).</p></td>
    </tr>
    <tr>
      <th>dict</th>
      <td><p>A tibble of the data dictionary. See <code><a href='get_data_dict.html'>get_data_dict</a></code>
for details. If not supplied the function will attempt to load a saved version of the
dictionary. If this fails and <code><a href='https://www.rdocumentation.org/packages/base/topics/assignOps'>download_data = TRUE</a></code> then the dictionary will be downloaded.</p></td>
    </tr>
    <tr>
      <th>metric</th>
      <td><p>Character string specifying the metric to plot</p></td>
    </tr>
    <tr>
      <th>metric_label</th>
      <td><p>Character string specifying the metric label to use.</p></td>
    </tr>
    <tr>
      <th>conf</th>
      <td><p>Character vector specifying the name variations to use to specify the upper
and lower confidence intervals. Defaults to <code>NULL</code> for which no confidence intervals
are used. Used by <code>annual_change</code>.</p></td>
    </tr>
    <tr>
      <th>years</th>
      <td><p>Numeric vector of years. Defaults to <code>NULL</code> which includes all years in the data.</p></td>
    </tr>
    <tr>
      <th>samples</th>
      <td><p>Numeric, the number of samples to use to generate confidence
intervals (only used when <code>conf</code> are present)</p></td>
    </tr>
    <tr>
      <th>countries</th>
      <td><p>A character string specifying the countries to plot.</p></td>
    </tr>
    <tr>
      <th>compare_to_region</th>
      <td><p>Logical, defaults to <code>FALSE</code>. If <code>TRUE</code> all
countries that share a region with those listed in <code>countries</code> will be plotted.
Note that this will override settings for <code>facet</code>, unless it is set to "country".</p></td>
    </tr>
    <tr>
      <th>compare_to_world</th>
      <td><p>Logical, defaults to <code>FALSE</code>. Should a comparision be made to
the metric of interests global value.</p></td>
    </tr>
    <tr>
      <th>custom_compare</th>
      <td><p>Logical, defaults to <code>NULL</code>. A named list of custom countries.</p></td>
    </tr>
    <tr>
      <th>compare_all_regions</th>
      <td><p>Logical, defaults to <code>FALSE</code>. Should all regions be compared.</p></td>
    </tr>
    <tr>
      <th>stat</th>
      <td><p>Character string, defaults to <code>"mean"</code>. The statistic to use to summarise the metric, currently
"mean" and "median" are supported. Note "mean" and "median" do not recompute the supplied country levels values.
Future options will include the weighted proportion and the summarised incidence rate.</p></td>
    </tr>
    <tr>
      <th>denominator</th>
      <td><p>Character string identifying the variable to use as a denominator in any proportion or rate calculation.</p></td>
    </tr>
    <tr>
      <th>truncate_at_zero</th>
      <td><p>Logical, defaults to <code>TRUE</code>. Should lower bounds be truncated at zero?</p></td>
    </tr>
    <tr>
      <th>annual_change</th>
      <td><p>Logical, defaults to <code>FALSE</code>. If <code>TRUE</code> then the
percentage annual change is computed for the specified metric.</p></td>
    </tr>
    <tr>
      <th>download_data</th>
      <td><p>Logical, defaults to <code>TRUE</code>. If not found locally should the data be
downloaded from the specified URL?</p></td>
    </tr>
    <tr>
      <th>save</th>
      <td><p>Logical, should the data be saved for reuse during the current R session. Defaults to
<code>TRUE</code>. If <code>TRUE</code> then the data is saved to the temporary directory specified by <code><a href='https://www.rdocumentation.org/packages/base/topics/tempfile'>tempdir</a></code>.</p></td>
    </tr>
    <tr>
      <th>burden_save_name</th>
      <td><p>Character string, name to save the data under. Defaults to
"TB_burden".</p></td>
    </tr>
    <tr>
      <th>dict_save_name</th>
      <td><p>Character string, name to save dictionary under. Defaults to
<code>TB_data_dict</code>.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>Logical, defaults to <code>TRUE</code>. Should additional status and progress messages
be displayed.</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A tibble containing summarised values (with 95<!-- % confidence intervals) for the metric of choice -->
stratified by area and year.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'>## Get the most recent year of data</span>
<span class='no'>tb_burden</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='get_tb_burden.html'>get_tb_burden</a></span>()</div><div class='output co'>#&gt; <span class='message'>Loading data from: /tmp/RtmpGUGIj7/TB_burden.rds</span></div><div class='output co'>#&gt; <span class='message'>Loading data from: /tmp/RtmpGUGIj7/MDR_TB.rds</span></div><div class='output co'>#&gt; <span class='message'>Joining TB burden data and MDR TB data.</span></div><div class='output co'>#&gt; <span class='message'>Joining, by = c("country", "iso2", "iso3", "iso_numeric", "year")</span></div><div class='input'><span class='no'>most_recent_year</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Extremes'>max</a></span>(<span class='no'>tb_burden</span>$<span class='no'>year</span>)

<span class='co'>## Get summary of the e_mdr_pct_rr_new cases</span>
<span class='fu'>summarise_tb_burden</span>(<span class='kw'>metric</span> <span class='kw'>=</span> <span class='st'>"e_mdr_pct_rr_new"</span>,
                    <span class='kw'>years</span> <span class='kw'>=</span>  <span class='no'>most_recent_year</span>,
                    <span class='kw'>samples</span> <span class='kw'>=</span> <span class='fl'>100</span>,
                    <span class='kw'>compare_all_regions</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
                    <span class='kw'>compare_to_world</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
                    <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</div><div class='output co'>#&gt; <span class='message'>Loading data from: /tmp/RtmpGUGIj7/TB_burden.rds</span></div><div class='output co'>#&gt; <span class='message'>Loading data from: /tmp/RtmpGUGIj7/MDR_TB.rds</span></div><div class='output co'>#&gt; <span class='message'>Joining TB burden data and MDR TB data.</span></div><div class='output co'>#&gt; <span class='message'>Joining, by = c("country", "iso2", "iso3", "iso_numeric", "year")</span></div><div class='output co'>#&gt; <span class='message'>Loading data from: /tmp/RtmpGUGIj7/TB_data_dict.rds</span></div><div class='output co'>#&gt; <span class='message'>1 results found for your variable search for e_mdr_pct_rr_new</span></div><div class='output co'>#&gt; <span class='message'>Loading data from: /tmp/RtmpGUGIj7/TB_burden.rds</span></div><div class='output co'>#&gt; <span class='message'>Loading data from: /tmp/RtmpGUGIj7/MDR_TB.rds</span></div><div class='output co'>#&gt; <span class='message'>Joining TB burden data and MDR TB data.</span></div><div class='output co'>#&gt; <span class='message'>Joining, by = c("country", "iso2", "iso3", "iso_numeric", "year")</span></div><div class='output co'>#&gt; <span class='message'>Loading data from: /tmp/RtmpGUGIj7/TB_data_dict.rds</span></div><div class='output co'>#&gt; <span class='message'>1 results found for your variable search for e_mdr_pct_rr_new</span></div><div class='output co'>#&gt; <span class='message'>Filtering to use only data from: 2017</span></div><div class='output co'>#&gt; <span class='message'>Confidence intervals were not found using your specified conf, so defaulting to estimating</span>
#&gt; <span class='message'>                only based on the point estimate.</span></div><div class='output co'>#&gt; [90m# A tibble: 7 x 5[39m
#&gt;   area    year e_mdr_pct_rr_new e_mdr_pct_rr_new_lo e_mdr_pct_rr_new_hi
#&gt;   [3m[90m&lt;fct&gt;[39m[23m  [3m[90m&lt;int&gt;[39m[23m            [3m[90m&lt;dbl&gt;[39m[23m               [3m[90m&lt;dbl&gt;[39m[23m               [3m[90m&lt;dbl&gt;[39m[23m
#&gt; [90m1[39m AFR     [4m2[24m017             67.7                38.9                96.6
#&gt; [90m2[39m AMR     [4m2[24m017             81.5                60.6               102. 
#&gt; [90m3[39m EMR     [4m2[24m017             77.0                33.5               120. 
#&gt; [90m4[39m EUR     [4m2[24m017             95.2                77.6               113. 
#&gt; [90m5[39m Global  [4m2[24m017             81.4                49.3               113. 
#&gt; [90m6[39m SEA     [4m2[24m017             85.5                42.2               129. 
#&gt; [90m7[39m WPR     [4m2[24m017             79.3                59.7                98.9</div><span class='co'># NOT RUN {</span>
<span class='co'>## Get median (with 95% IQR) of the case fatality rate for regions and the world</span>
<span class='co'>## Boostrapping uncertainty in country measures</span>
<span class='fu'>summarise_tb_burden</span>(<span class='kw'>metric</span> <span class='kw'>=</span> <span class='st'>"cfr"</span>,
                    <span class='kw'>years</span> <span class='kw'>=</span>  <span class='no'>most_recent_year</span>,
                    <span class='kw'>samples</span> <span class='kw'>=</span> <span class='fl'>100</span>,
                    <span class='kw'>stat</span> <span class='kw'>=</span> <span class='st'>"median"</span>,
                    <span class='kw'>compare_all_regions</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
                    <span class='kw'>compare_to_world</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
                    <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)


<span class='co'>## Get summary data for the UK, Europe and the world</span>
<span class='co'>## Bootstrapping CI's </span>
<span class='fu'>summarise_tb_burden</span>(<span class='kw'>metric</span> <span class='kw'>=</span> <span class='st'>"e_inc_num"</span>,
                    <span class='kw'>samples</span> <span class='kw'>=</span> <span class='fl'>100</span>,
                    <span class='kw'>stat</span> <span class='kw'>=</span> <span class='st'>"median"</span>,
                    <span class='kw'>countries</span> <span class='kw'>=</span> <span class='st'>"United Kingdom"</span>,
                    <span class='kw'>compare_to_world</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
                    <span class='kw'>compare_to_region</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
                    <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Sam Abbott.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script>
  docsearch({
    
    
    apiKey: '6c737a6c632ea7eab75c912a6b07b5f1',
    indexName: 'gettbinr',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>


  </body>
</html>

